{% extends "base.html" %}
{% load static %}
{% block head %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/books.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'css/free.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'css/product.css' %}" type="text/css" />
{% endblock %}
{% block content %}
{% load crispy_forms_tags %}
<div class="container position-relative">
  <a class="position-absolute upload-book" href='{% url "products:sell" %}'>Upload your Product</a>
  <div class="books-header pt-4">
    <h1>All Products</h1>
      <div class="books-header-underline"></div>
  </div>
  <div class="mt-4">
    <div>
      <form class="d-flex">
        <div class="input-group align-items-end">
          {{ form|crispy }}
          <button class="btn" type="submit">Search</button>
          <a href="{% url 'products:home' %}" class="text-link float-end">Reset</a>
      </form>
    </div>
  </div>

  {% if form.search.value %}
  Searched for: <b>{{ form.search.value }} </b> with Category: {{ form.category.category }}
  <hr />
  {% endif %}
  <div class="custom-container">
    <div class="card__container">
      {% if products %}
      {% for product in products %}
      <div class="my-3">
        <div class="card p-0 p-sm-3 aha-card-sm" aria-label="Card">
          <div class="row no-gutters align-items-start">
            <div class="col-12 col-sm-3 p-4 p-sm-0 card-head-img"><img src="{{ product.image.url }}"
                class="card-img mx-auto" alt="{{ product.title }}"></div>
            <div class="col-12 col-sm-9 p-4 py-sm-0 card-body">
              <span href="#" class="d-block mb-2 mb-sm-2 card-title">
                <h3 class="m-0">{{ product.title }}</h3>
                <h6>${{ product.price }}</h6>
              </span>
              <div class="aha-card-tags">
                <span class="tag font-italic">{{ product.category }}</span>
              </div>
              <div class="card-detail">
                <span class="pr-sm-4 mb-2 mb-sm-0 d-block d-sm-inline">{{ product.description }}</span>
              </div>
              <div class="d-flex">
                <a href="{% url 'products:detail_product' product.pk %}"
                  class="btn btn-md btn-round btn-sm btn-primary mt-3" style="float:right">View Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
      {% else %}
      <div class="alert alert-info mt-3" role="alert">
        No products available.
      </div>
      {% endif %}
    </div>
  </div>
</div>
</div>
{% endblock content %}